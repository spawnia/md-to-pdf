diff --git a/Cargo.lock b/Cargo.lock
index f9d555f..db77679 100644
--- a/Cargo.lock
+++ b/Cargo.lock
@@ -50,9 +50,9 @@ dependencies = [
 
 [[package]]
 name = "async-trait"
-version = "0.1.87"
+version = "0.1.88"
 source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "d556ec1359574147ec0c4fc5eb525f3f23263a592b1a9c07e0a75b427de55c97"
+checksum = "e539d3fca749fcee5236ab05e93a52867dd549cc157c8cb7f99595f3cedffdb5"
 dependencies = [
  "proc-macro2",
  "quote",
@@ -124,23 +124,17 @@ version = "1.22.0"
 source = "registry+https://github.com/rust-lang/crates.io-index"
 checksum = "b6b1fc10dbac614ebc03540c9dbd60e83887fda27794998c6528f1782047d540"
 
-[[package]]
-name = "byteorder"
-version = "1.5.0"
-source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "1fd0f2584146f6f2ef48085050886acf353beff7305ebd1ae69500e27c67f64b"
-
 [[package]]
 name = "bytes"
-version = "1.10.0"
+version = "1.10.1"
 source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "f61dac84819c6588b558454b194026eb1f09c293b9036ae9b159e74e73ab6cf9"
+checksum = "d71b6127be86fdcfddb610f7182ac57211d4b18a3e9c82eb2d17662f2227ad6a"
 
 [[package]]
 name = "cc"
-version = "1.2.16"
+version = "1.2.18"
 source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "be714c154be609ec7f5dad223a33bf1482fff90472de28f7362806e6d4832b8c"
+checksum = "525046617d8376e3db1deffb079e91cef90a89fc3ca5c185bbf8c9ecdd15cd5c"
 dependencies = [
  "shlex",
 ]
@@ -164,9 +158,9 @@ dependencies = [
 
 [[package]]
 name = "deranged"
-version = "0.3.11"
+version = "0.4.0"
 source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "b42b6fa04a440b495c8b04d0e71b707c585f83cb9cb28cf8cd0d976c315e31b4"
+checksum = "9c9e6a11ca8224451684bc0d7d5a7adbf8f2fd6887261a1cfc3c0432f9d4068e"
 dependencies = [
  "powerfmt",
 ]
@@ -217,9 +211,9 @@ dependencies = [
 
 [[package]]
 name = "either"
-version = "1.14.0"
+version = "1.15.0"
 source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "b7914353092ddf589ad78f25c5c1c21b7f80b0ff8621e7c814c3485b5306da9d"
+checksum = "48c757948c5ede0e46177b7add2e67155f70e33c07fea8284df6576da70b3719"
 
 [[package]]
 name = "encoding_rs"
@@ -251,9 +245,9 @@ checksum = "877a4ace8713b0bcf2a4e7eec82529c029f1d0619886d18145fea96c3ffe5c0f"
 
 [[package]]
 name = "errno"
-version = "0.3.10"
+version = "0.3.11"
 source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "33d852cb9b869c2a9b3df2f71a3074817f01e1844f839a144f5fcef059a4eb5d"
+checksum = "976dd42dc7e85965fe702eb8164f21f450704bdde31faefd6471dba214cb594e"
 dependencies = [
  "libc",
  "windows-sys 0.59.0",
@@ -385,14 +379,14 @@ dependencies = [
 
 [[package]]
 name = "getrandom"
-version = "0.3.1"
+version = "0.3.2"
 source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "43a49c392881ce6d5c3b8cb70f98717b7c07aabbdff06687b9030dbfbe2725f8"
+checksum = "73fea8450eea4bac3940448fb7ae50d91f034f941199fcd9d909a5a07aa455f0"
 dependencies = [
  "cfg-if",
  "libc",
- "wasi 0.13.3+wasi-0.2.2",
- "windows-targets 0.52.6",
+ "r-efi",
+ "wasi 0.14.2+wasi-0.2.4",
 ]
 
 [[package]]
@@ -449,9 +443,9 @@ checksum = "d231dfb89cfffdbc30e7fc41579ed6066ad03abda9e567ccafae602b97ec5024"
 
 [[package]]
 name = "hermit-abi"
-version = "0.4.0"
+version = "0.5.0"
 source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "fbf6a919d6cf397374f7dfeeea91d974c7c0a7221d0d0f4f20d859d329e53fcc"
+checksum = "fbd780fe5cc30f81464441920d82ac8740e2e46b29a6fad543ddd075229ce37e"
 
 [[package]]
 name = "http"
@@ -466,9 +460,9 @@ dependencies = [
 
 [[package]]
 name = "http"
-version = "1.2.0"
+version = "1.3.1"
 source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "f16ca2af56261c99fba8bac40a10251ce8188205a4c448fbb745a2e4daa76fea"
+checksum = "f4a85d31aea989eead29a3aaf9e1115a180df8282431156e533de47660892565"
 dependencies = [
  "bytes",
  "fnv",
@@ -488,9 +482,9 @@ dependencies = [
 
 [[package]]
 name = "httparse"
-version = "1.10.0"
+version = "1.10.1"
 source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "f2d708df4e7140240a16cd6ab0ab65c972d7433ab77819ea693fde9c43811e2a"
+checksum = "6dbf3de79e51f3d586ab4cb9d5c3e2c14aa28ed23d180cf89b4df0454a69cc87"
 
 [[package]]
 name = "httpdate"
@@ -500,9 +494,9 @@ checksum = "df3b46402a9d5adb4c86a0cf463f42e19994e3ee891101b1841f30a545cb49a9"
 
 [[package]]
 name = "humantime"
-version = "2.1.0"
+version = "2.2.0"
 source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "9a3a5bfb195931eeb336b2a7b4d761daec841b97f947d34394601737a7bba5e4"
+checksum = "9b112acc8b3adf4b107a8ec20977da0273a8c386765a3ec0229bd500a1443f9f"
 
 [[package]]
 name = "hyper"
@@ -569,9 +563,9 @@ dependencies = [
 
 [[package]]
 name = "icu_locid_transform_data"
-version = "1.5.0"
+version = "1.5.1"
 source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "fdc8ff3388f852bede6b579ad4e978ab004f139284d7b28715f773507b946f6e"
+checksum = "7515e6d781098bf9f7205ab3fc7e9709d34554ae0b21ddbcb5febfa4bc7df11d"
 
 [[package]]
 name = "icu_normalizer"
@@ -593,9 +587,9 @@ dependencies = [
 
 [[package]]
 name = "icu_normalizer_data"
-version = "1.5.0"
+version = "1.5.1"
 source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "f8cafbf7aa791e9b22bec55a167906f9e1215fd475cd22adfcf660e03e989516"
+checksum = "c5e8338228bdc8ab83303f16b797e177953730f601a96c25d10cb3ab0daa0cb7"
 
 [[package]]
 name = "icu_properties"
@@ -614,9 +608,9 @@ dependencies = [
 
 [[package]]
 name = "icu_properties_data"
-version = "1.5.0"
+version = "1.5.1"
 source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "67a8effbc3dd3e4ba1afa8ad918d5684b8868b3b26500753effea8d2eed19569"
+checksum = "85fb8799753b75aee8d2a21d7c14d9f38921b54b3dbda10f5a3c7a7b82dba5e2"
 
 [[package]]
 name = "icu_provider"
@@ -669,9 +663,9 @@ dependencies = [
 
 [[package]]
 name = "indexmap"
-version = "2.7.1"
+version = "2.9.0"
 source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "8c9c992b02b5b4c94ea26e32fe5bccb7aa7d9f390ab5c1221ff895bc7ea8b652"
+checksum = "cea70ddb795996207ad57735b50c5982d8844f38ba9ee5f1aedcfb708a2aa11e"
 dependencies = [
  "equivalent",
  "hashbrown",
@@ -686,20 +680,20 @@ checksum = "c8fae54786f62fb2918dcfae3d568594e50eb9b5c25bf04371af6fe7516452fb"
 
 [[package]]
 name = "is-terminal"
-version = "0.4.15"
+version = "0.4.16"
 source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "e19b23d53f35ce9f56aebc7d1bb4e6ac1e9c0db7ac85c8d1760c04379edced37"
+checksum = "e04d7f318608d35d4b61ddd75cbdaee86b023ebe2bd5a66ee0915f0bf93095a9"
 dependencies = [
- "hermit-abi 0.4.0",
+ "hermit-abi 0.5.0",
  "libc",
  "windows-sys 0.59.0",
 ]
 
 [[package]]
 name = "itoa"
-version = "1.0.14"
+version = "1.0.15"
 source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "d75a2a4b1b190afb6f5425f10f6a8f959d2ea0b9c2b1d79553551850539e4674"
+checksum = "4a5f13b858c8d314ee3e8f639011f7ccefe71f97f96e50151fb991f267928e2c"
 
 [[package]]
 name = "lazy_static"
@@ -709,15 +703,15 @@ checksum = "bbd2bcb4c963f2ddae06a2efc7e9f3591312473c50c6685e1f298068316e66fe"
 
 [[package]]
 name = "libc"
-version = "0.2.170"
+version = "0.2.171"
 source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "875b3680cb2f8f71bdcf9a30f38d48282f5d3c95cbf9b3fa57269bb5d5c06828"
+checksum = "c19937216e9d3aa9956d9bb8dfc0b0c8beb6058fc4f7a4dc4d850edf86a237d6"
 
 [[package]]
 name = "linux-raw-sys"
-version = "0.4.15"
+version = "0.9.4"
 source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "d26c52dbd32dccf2d10cac7725f8eae5296885fb5703b261f7d0a0739ec807ab"
+checksum = "cd945864f07fe9f5371a27ad7b52a172b4b499999f1d97574c9fa68373937e12"
 
 [[package]]
 name = "litemap"
@@ -737,9 +731,9 @@ dependencies = [
 
 [[package]]
 name = "log"
-version = "0.4.26"
+version = "0.4.27"
 source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "30bde2b3dc3671ae49d8e2e9f044c7c005836e7a023ee57cffa25ab82764bb9e"
+checksum = "13dc2df351e3202783a1fe0d44375f7295ffb4049267b0f3018346dc122a1d94"
 
 [[package]]
 name = "loom"
@@ -791,9 +785,9 @@ checksum = "6877bb514081ee2a7ff5ef9de3281f14a4dd4bceac4c09388074a6b5df8a139a"
 
 [[package]]
 name = "miniz_oxide"
-version = "0.8.5"
+version = "0.8.8"
 source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "8e3e04debbb59698c15bacbb6d93584a8c0ca9cc3213cb423d31f760d8843ce5"
+checksum = "3be647b768db090acb35d5ec5db2b0e1f1de11133ca123b9eacf5137868f892a"
 dependencies = [
  "adler2",
 ]
@@ -818,7 +812,7 @@ dependencies = [
  "bytes",
  "encoding_rs",
  "futures-util",
- "http 1.2.0",
+ "http 1.3.1",
  "httparse",
  "memchr",
  "mime",
@@ -865,9 +859,9 @@ dependencies = [
 
 [[package]]
 name = "once_cell"
-version = "1.20.3"
+version = "1.21.3"
 source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "945462a4b81e43c4e3ba96bd7b49d834c6f61198356aa858733bc4acf3cbe62e"
+checksum = "42f5e15c9953c5e4ccceeb2e7382a716482c34515315f7b03532b8b4e8393d2d"
 
 [[package]]
 name = "overload"
@@ -947,9 +941,9 @@ checksum = "439ee305def115ba05938db6eb1644ff94165c5ab5e9420d1c1bcedbba909391"
 
 [[package]]
 name = "ppv-lite86"
-version = "0.2.20"
+version = "0.2.21"
 source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "77957b295656769bb8ad2b6a6b09d897d94f05c41b069aede1fcdaa675eaea04"
+checksum = "85eae3c4ed2f50dcfe72643da4befc30deadb458a9b590d720cde2f2b1e97da9"
 dependencies = [
  "zerocopy",
 ]
@@ -978,13 +972,19 @@ dependencies = [
 
 [[package]]
 name = "quote"
-version = "1.0.39"
+version = "1.0.40"
 source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "c1f1914ce909e1658d9907913b4b91947430c7d9be598b15a1912935b8c04801"
+checksum = "1885c039570dc00dcb4ff087a89e185fd56bae234ddc7f056a945bf36467248d"
 dependencies = [
  "proc-macro2",
 ]
 
+[[package]]
+name = "r-efi"
+version = "5.2.0"
+source = "registry+https://github.com/rust-lang/crates.io-index"
+checksum = "74765f6d916ee2faa39bc8e68e4f3ed8949b48cccdac59983d287a7cb71ce9c5"
+
 [[package]]
 name = "rand"
 version = "0.8.5"
@@ -1017,9 +1017,9 @@ dependencies = [
 
 [[package]]
 name = "redox_syscall"
-version = "0.5.9"
+version = "0.5.11"
 source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "82b568323e98e49e2a0899dcee453dd679fae22d69adf9b11dd508d1549b7e2f"
+checksum = "d2f103c6d277498fbceb16e84d317e2a400f160f46904d5f5410848c829511a3"
 dependencies = [
  "bitflags",
 ]
@@ -1195,9 +1195,9 @@ checksum = "719b953e2095829ee67db738b3bfa9fa368c94900df327b3f07fe6e794d2fe1f"
 
 [[package]]
 name = "rustix"
-version = "0.38.44"
+version = "1.0.5"
 source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "fdb5bc1ae2baa591800df16c9ca78619bf65c0488b41b96ccec5d11220d8c154"
+checksum = "d97817398dd4bb2e6da002002db259209759911da105da92bec29ccb12cf58bf"
 dependencies = [
  "bitflags",
  "errno",
@@ -1208,15 +1208,15 @@ dependencies = [
 
 [[package]]
 name = "rustversion"
-version = "1.0.19"
+version = "1.0.20"
 source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "f7c45b9784283f1b2e7fb61b42047c2fd678ef0960d4f6f1eba131594cc369d4"
+checksum = "eded382c5f5f786b989652c49544c4877d9f015cc22e145a5ea8ea66c2921cd2"
 
 [[package]]
 name = "ryu"
-version = "1.0.19"
+version = "1.0.20"
 source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "6ea1a2d0a644769cc99faa24c3ad26b379b786fe7c36fd3c546254801650e6dd"
+checksum = "28d3b2b1366ec20994f1fd18c3c594f05c5dd4bc44d8bb0c1c632c8d6829481f"
 
 [[package]]
 name = "scoped-tls"
@@ -1232,18 +1232,18 @@ checksum = "94143f37725109f92c262ed2cf5e59bce7498c01bcc1502d7b9afe439a4e9f49"
 
 [[package]]
 name = "serde"
-version = "1.0.218"
+version = "1.0.219"
 source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "e8dfc9d19bdbf6d17e22319da49161d5d0108e4188e8b680aef6299eed22df60"
+checksum = "5f0e2c6ed6606019b4e29e69dbaba95b11854410e5347d525002456dbbb786b6"
 dependencies = [
  "serde_derive",
 ]
 
 [[package]]
 name = "serde_derive"
-version = "1.0.218"
+version = "1.0.219"
 source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "f09503e191f4e797cb8aac08e9a4a4695c5edf6a2e70e376d961ddd5c969f82b"
+checksum = "5b0276cf7f2c73365f7157c8123c21cd9a50fbbd844757af28ca1f5925fc2a00"
 dependencies = [
  "proc-macro2",
  "quote",
@@ -1306,15 +1306,15 @@ dependencies = [
 
 [[package]]
 name = "smallvec"
-version = "1.14.0"
+version = "1.15.0"
 source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "7fcf8323ef1faaee30a44a340193b1ac6814fd9b7b4e88e9d4519a3e4abe1cfd"
+checksum = "8917285742e9f3e1683f0a9c4e6b57960b7314d0b08d30d1ecd426713ee2eee9"
 
 [[package]]
 name = "socket2"
-version = "0.5.8"
+version = "0.5.9"
 source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "c970269d99b64e60ec3bd6ad27270092a5394c4e309314b18ae3fe575695fbe8"
+checksum = "4f5fd57c80058a56cf5c777ab8a126398ece8e442983605d280a44ce79d0edef"
 dependencies = [
  "libc",
  "windows-sys 0.52.0",
@@ -1352,9 +1352,9 @@ dependencies = [
 
 [[package]]
 name = "syn"
-version = "2.0.99"
+version = "2.0.100"
 source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "e02e925281e18ffd9d640e234264753c43edc62d64b2d4cf898f1bc5e75f3fc2"
+checksum = "b09a44accad81e1ba1cd74a32461ba89dee89095ba17b32f5d03683b1b1fc2a0"
 dependencies = [
  "proc-macro2",
  "quote",
@@ -1374,13 +1374,12 @@ dependencies = [
 
 [[package]]
 name = "tempfile"
-version = "3.17.1"
+version = "3.19.1"
 source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "22e5a0acb1f3f55f65cc4a866c361b2fb2a0ff6366785ae6fbb5f85df07ba230"
+checksum = "7437ac7763b9b123ccf33c338a5cc1bac6f69b45a136c19bdd8a65e3916435bf"
 dependencies = [
- "cfg-if",
  "fastrand",
- "getrandom 0.3.1",
+ "getrandom 0.3.2",
  "once_cell",
  "rustix",
  "windows-sys 0.59.0",
@@ -1407,9 +1406,9 @@ dependencies = [
 
 [[package]]
 name = "time"
-version = "0.3.37"
+version = "0.3.41"
 source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "35e7868883861bd0e56d9ac6efcaaca0d6d5d82a2a7ec8209ff492c07cf37b21"
+checksum = "8a7619e19bc266e0f9c5e6686659d394bc57973859340060a69221e57dbc0c40"
 dependencies = [
  "deranged",
  "itoa",
@@ -1422,15 +1421,15 @@ dependencies = [
 
 [[package]]
 name = "time-core"
-version = "0.1.2"
+version = "0.1.4"
 source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "ef927ca75afb808a4d64dd374f00a2adf8d0fcff8e7b184af886c3c87ec4a3f3"
+checksum = "c9e9a38711f559d9e3ce1cdb06dd7c5b8ea546bc90052da6d06bb76da74bb07c"
 
 [[package]]
 name = "time-macros"
-version = "0.2.19"
+version = "0.2.22"
 source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "2834e6017e3e5e4b9834939793b282bc03b37a3336245fa820e35e233e2a85de"
+checksum = "3526739392ec93fd8b359c8e98514cb3e8e021beb4e5f597b00a0221f8ed8a49"
 dependencies = [
  "num-conv",
  "time-core",
@@ -1448,9 +1447,9 @@ dependencies = [
 
 [[package]]
 name = "tokio"
-version = "1.43.0"
+version = "1.44.2"
 source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "3d61fa4ffa3de412bfea335c6ecff681de2b609ba3c77ef3e00e521813a9ed9e"
+checksum = "e6b88822cbe49de4185e3a4cbf8321dd487cf5fe0c5c65695fef6346371e9c48"
 dependencies = [
  "backtrace",
  "bytes",
@@ -1487,9 +1486,9 @@ dependencies = [
 
 [[package]]
 name = "tokio-util"
-version = "0.7.13"
+version = "0.7.14"
 source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "d7fcaa8d55a2bdd6b83ace262b016eca0d79ee02818c5c1bcdf0305114081078"
+checksum = "6b9590b93e6fcc1739458317cccd391ad3955e2bde8913edf6f95f9e65a8f034"
 dependencies = [
  "bytes",
  "futures-core",
@@ -1642,9 +1641,9 @@ dependencies = [
 
 [[package]]
 name = "unicode-ident"
-version = "1.0.17"
+version = "1.0.18"
 source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "00e2473a93778eb0bad35909dff6a10d28e63f792f16ed15e404fca9d5eeedbe"
+checksum = "5a5f39404a5da50712a4c1eecf25e90dd62b613502b7e925fd4e4d19b5c96512"
 
 [[package]]
 name = "unicode-xid"
@@ -1704,9 +1703,9 @@ checksum = "9c8d87e72b64a3b4db28d11ce29237c246188f4f51057d65a7eab63b7987e423"
 
 [[package]]
 name = "wasi"
-version = "0.13.3+wasi-0.2.2"
+version = "0.14.2+wasi-0.2.4"
 source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "26816d2e1a4a36a2940b96c5296ce403917633dff8f3440e9b236ed6f6bacad2"
+checksum = "9683f9a5a998d873c0d21fcbe3c083009670149a8fab228644b8bd36b2c48cb3"
 dependencies = [
  "wit-bindgen-rt",
 ]
@@ -1892,18 +1891,18 @@ checksum = "589f6da84c646204747d1270a2a5661ea66ed1cced2631d546fdfb155959f9ec"
 
 [[package]]
 name = "winnow"
-version = "0.7.3"
+version = "0.7.6"
 source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "0e7f4ea97f6f78012141bcdb6a216b2609f0979ada50b20ca5b52dde2eac2bb1"
+checksum = "63d3fcd9bba44b03821e7d699eeee959f3126dcc4aa8e4ae18ec617c2a5cea10"
 dependencies = [
  "memchr",
 ]
 
 [[package]]
 name = "wit-bindgen-rt"
-version = "0.33.0"
+version = "0.39.0"
 source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "3268f3d866458b787f390cf61f4bbb563b922d091359f9608842999eaee3943c"
+checksum = "6f42320e61fe2cfd34354ecb597f86f413484a798ba44a8ca1165c58d42da6c1"
 dependencies = [
  "bitflags",
 ]
@@ -1955,19 +1954,18 @@ dependencies = [
 
 [[package]]
 name = "zerocopy"
-version = "0.7.35"
+version = "0.8.24"
 source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "1b9b4fd18abc82b8136838da5d50bae7bdea537c574d8dc1a34ed098d6c166f0"
+checksum = "2586fea28e186957ef732a5f8b3be2da217d65c5969d4b1e17f973ebbe876879"
 dependencies = [
- "byteorder",
  "zerocopy-derive",
 ]
 
 [[package]]
 name = "zerocopy-derive"
-version = "0.7.35"
+version = "0.8.24"
 source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "fa4f8080344d4671fb4e831a13ad1e68092748387dfc4f55e356242fae12ce3e"
+checksum = "a996a8f63c5c4448cd959ac1bab0aaa3306ccfd060472f85943ee0750f0169be"
 dependencies = [
  "proc-macro2",
  "quote",
diff --git a/Cargo.toml b/Cargo.toml
index 323b9cc..5b83b4f 100644
--- a/Cargo.toml
+++ b/Cargo.toml
@@ -11,4 +11,8 @@ rocket_cors = "0.6"
 tempfile = "3"
 log = "0.4"
 env_logger = "0.9"
-serde = { version = "1.0", features = ["derive"] }
\ No newline at end of file
+serde = { version = "1.0", features = ["derive"] }
+serde_json = "1.0"
+tera = "1"
+lopdf = "0.34"
+uuid = { version = "1", features = ["v4"] }
\ No newline at end of file
diff --git a/Dockerfile b/Dockerfile
index cc74c93..96cc233 100644
--- a/Dockerfile
+++ b/Dockerfile
@@ -13,6 +13,8 @@ RUN apt-get update \
       wkhtmltopdf \
       texlive \
       build-essential python3-dev python3-pip python3-setuptools python3-wheel python3-cffi libcairo2 libpango-1.0-0 libpangocairo-1.0-0 libgdk-pixbuf2.0-0 libffi-dev shared-mime-info \
+      poppler-utils \
+      qpdf \
  && rm -rf /var/lib/apt/lists/* \
  # https://stackoverflow.com/questions/75608323/how-do-i-solve-error-externally-managed-environment-every-time-i-use-pip-3
  && pip3 install --no-cache-dir --break-system-packages weasyprint \
diff --git a/Rocket.toml b/Rocket.toml
index 6edc577..703325f 100644
--- a/Rocket.toml
+++ b/Rocket.toml
@@ -4,3 +4,4 @@ address = "0.0.0.0"
 # https://rocket.rs/guide/v0.5/configuration/#limits
 [default.limits]
 forms = "128KiB"
+json = "10MiB"
diff --git a/install.sh b/install.sh
index 4658a03..c55391e 100644
--- a/install.sh
+++ b/install.sh
@@ -51,6 +51,18 @@ then
     sudo usermod -aG docker "$USER"
 
     echo -e "${GREEN}Docker installed. Please log out and log back in to use Docker without sudo.${NC}"
+
+    make dc-build
+    make docker network create ai-toolkit-network
+    make cargo-deps
+    make serve
+
+    echo -e "${GREEN}Installation complete.${NC}"
+
+    chmod +x test.sh
+    ./test.sh
+
+    echo -e "${GREEN}Test complete.${NC}"
 else
     echo -e "${GREEN}Docker is already installed.${NC}"
 fi
diff --git a/src/main.rs b/src/main.rs
index 0755400..e359bb0 100644
--- a/src/main.rs
+++ b/src/main.rs
@@ -4,290 +4,14 @@ extern crate rocket;
 #[macro_use]
 extern crate log;
 
-use core::fmt;
+mod helpers;
+mod routes;
+mod types;
+
 use env_logger;
-use rocket::form::Form;
-use rocket::fs::{FileServer, NamedFile};
-use rocket::http::{ContentType, Method, Status, Header};
-use rocket::request::Request;
-use rocket::response::{self, Responder, Response};
-use rocket::serde::{json::Json, Serialize}; // <-- Needed for JSON
+use rocket::fs::FileServer;
+use rocket::http::Method;
 use rocket_cors::{AllowedOrigins, CorsOptions};
-use std::fmt::{Display, Formatter};
-use std::fs;
-use std::io::{self, Write};
-use std::path::{Path};
-use std::process::{Command, Output, Stdio};
-use tempfile::Builder;
-use rocket::Either;
-use std::env;
-
-// ------------ PDF Engine enum ------------
-
-#[derive(FromFormField)]
-enum PdfEngine {
-    Weasyprint,
-    Wkhtmltopdf,
-    Pdflatex,
-}
-
-impl Display for PdfEngine {
-    fn fmt(&self, f: &mut Formatter<'_>) -> fmt::Result {
-        match *self {
-            PdfEngine::Weasyprint => write!(f, "weasyprint"),
-            PdfEngine::Wkhtmltopdf => write!(f, "wkhtmltopdf"),
-            PdfEngine::Pdflatex => write!(f, "pdflatex"),
-        }
-    }
-}
-
-// ------------ Form Data ------------
-
-#[derive(FromForm)]
-struct ConvertForm {
-    markdown: String,
-    css: Option<String>,
-    engine: Option<PdfEngine>,
-    header_template: Option<String>,
-    footer_template: Option<String>,
-    client_id: Option<String>,
-    pdf_name: Option<String>,
-}
-
-// ------------ Error Handling ------------
-
-#[derive(Debug)]
-enum ConvertError {
-    Output(Output),
-    IO(#[allow(dead_code)] io::Error),
-}
-
-impl From<io::Error> for ConvertError {
-    fn from(err: io::Error) -> ConvertError {
-        ConvertError::IO(err)
-    }
-}
-
-impl<'r> Responder<'r, 'static> for ConvertError {
-    fn respond_to(self, _: &Request) -> response::Result<'static> {
-        let mut builder = Response::build();
-        match self {
-            ConvertError::Output(output) => builder
-                .header(ContentType::Plain)
-                .sized_body(output.stderr.len(), io::Cursor::new(output.stderr))
-                .status(Status::BadRequest),
-            ConvertError::IO(_) => builder.status(Status::InternalServerError),
-        };
-        builder.ok()
-    }
-}
-
-// ------------ JSON response when we do have clientId/pdfName ------------
-
-#[derive(Serialize)]
-struct ConvertResponse {
-    /// The download link to retrieve the PDF
-    download_url: String,
-}
-
-// Add this struct and implementation
-struct PdfResponse(Response<'static>);
-
-impl<'r> Responder<'r, 'static> for PdfResponse {
-    fn respond_to(self, _: &'r Request<'_>) -> response::Result<'static> {
-        Ok(self.0)
-    }
-}
-
-// ------------ PDF Generation Endpoint ------------
-
-#[post("/", data = "<form>")]
-async fn convert(form: Form<ConvertForm>) -> Result<Either<NamedFile, Json<ConvertResponse>>, ConvertError> {
-    let form_data = form.into_inner();
-    
-    // Use a completely different approach with raw HTML block that won't be processed by Markdown
-    let censor_replacement = "<div style=\"width:100% !important; max-width:100% !important; margin-top:0 !important; margin-bottom:0 !important; margin-left:0 !important; margin-right:0 !important; padding:0 !important; overflow:hidden !important; position:relative !important; left:0 !important; right:auto !important; box-sizing:border-box !important; text-align:left !important;\"><img src=\"static/blured.png\" alt=\"CONTENU PREMIUM - Achetez le rapport complet\" style=\"width:100% !important; height:auto !important; display:block !important; margin:0 !important; padding:0 !important; float:none !important;\"></div>";
-    
-    // Process with multiple different formats of the tag to ensure we catch it
-    let mut processed_markdown = form_data.markdown.clone();
-    processed_markdown = processed_markdown.replace("{{CENSOR}}", censor_replacement);
-    processed_markdown = processed_markdown.replace("<CENSOR>", censor_replacement);
-    processed_markdown = processed_markdown.replace("{{ CENSOR }}", censor_replacement);
-    processed_markdown = processed_markdown.replace("{{CENSOR }}", censor_replacement);
-    processed_markdown = processed_markdown.replace("{{ CENSOR}}", censor_replacement);
-    
-    println!("Final processed markdown: {}", processed_markdown);
-
-    // Start building pandoc command
-    let mut pandoc_builder = Command::new("pandoc");
-    // Make sure HTML is preserved raw
-    pandoc_builder.arg("--from=markdown+raw_html");
-    // Ensure output is properly formatted
-    pandoc_builder.arg("--standalone");
-    // Use HTML5 output
-    pandoc_builder.arg("--to=html5");
-    
-    // Add page geometry options for better handling of full-width elements
-    pandoc_builder.arg("--variable=geometry:margin=1.5cm");
-    pandoc_builder.arg("--variable=papersize=a4");
-
-    // Create a temporary PDF
-    let pdf_temp_path = Builder::new()
-        .suffix(".pdf")
-        .tempfile()?;
-    let pdf_path = pdf_temp_path
-        .path()
-        .to_str()
-        .expect("Non UTF-8 path not supported");
-    pandoc_builder.arg(format!("--output={}", pdf_path));
-
-    // Choose the PDF engine, default to Weasyprint
-    let engine = form_data.engine.unwrap_or(PdfEngine::Weasyprint);
-    pandoc_builder.arg(format!("--pdf-engine={}", engine));
-
-    // Handle CSS
-    let default_css_path = "templates/default.css";
-    let default_css = fs::read_to_string(default_css_path)?;
-    
-    let css_content = if let Some(css) = form_data.css {
-        // Combine default and custom CSS
-        format!("{}{}", default_css, css)
-    } else {
-        default_css
-    };
-
-    let mut css_file = Builder::new().suffix(".css").tempfile()?;
-    css_file.write_all(css_content.as_bytes())?;
-    let css_file_path = css_file.into_temp_path();
-    let css_file_path_str = css_file_path.to_str().unwrap();
-    pandoc_builder.arg(format!("--css={}", css_file_path_str));
-
-    // Create vectors to hold our temp files so they stay alive through the pandoc execution
-    let mut temp_files = Vec::new();
-
-    // Handle header template
-    if let Some(header_template) = form_data.header_template {
-        if !header_template.is_empty() {
-            // Always look in templates directory
-            let current_dir = env::current_dir().unwrap();
-            let header_path = current_dir.join("templates").join(&header_template);
-            if header_path.exists() {
-                let header_content = fs::read_to_string(&header_path)?;
-                let mut header_file = Builder::new().suffix(".html").tempfile()?;
-                header_file.write_all(header_content.as_bytes())?;
-                let header_path = header_file.path().to_str().unwrap().to_string();
-                pandoc_builder.arg(format!("--include-in-header={}", header_path));
-                temp_files.push(header_file);
-            } else {
-                error!("Header template file not found at: {:?}", header_path);
-                return Err(ConvertError::IO(io::Error::new(
-                    io::ErrorKind::NotFound,
-                    "Header template file not found",
-                )));
-            }
-        }
-    }
-
-    // Handle footer template
-    if let Some(footer_template) = form_data.footer_template {
-        if !footer_template.is_empty() {
-            // Always look in templates directory
-            let current_dir = env::current_dir().unwrap();
-            let footer_path = current_dir.join("templates").join(&footer_template);
-            if footer_path.exists() {
-                let footer_content = fs::read_to_string(&footer_path)?;
-                let mut footer_file = Builder::new().suffix(".html").tempfile()?;
-                footer_file.write_all(footer_content.as_bytes())?;
-                let footer_path = footer_file.path().to_str().unwrap().to_string();
-                pandoc_builder.arg(format!("--include-after-body={}", footer_path));
-                temp_files.push(footer_file);
-            } else {
-                error!("Footer template file not found at: {:?}", footer_path);
-                return Err(ConvertError::IO(io::Error::new(
-                    io::ErrorKind::NotFound,
-                    "Footer template file not found",
-                )));
-            }
-        }
-    }
-
-    pandoc_builder.stdin(Stdio::piped());
-    pandoc_builder.stdout(Stdio::piped()).stderr(Stdio::piped());
-
-    // Spawn pandoc
-    let mut pandoc_process = pandoc_builder.spawn()?;
-    // Write the processed markdown to pandoc
-    pandoc_process
-        .stdin
-        .as_mut()
-        .unwrap()
-        .write_all(processed_markdown.as_bytes())?;
-    let output = pandoc_process.wait_with_output()?;
-
-    // temp_files will be dropped here, after pandoc is done
-
-    if !output.status.success() {
-        error!("Pandoc process failed with output: {:?}", output);
-        return Err(ConvertError::Output(output));
-    }
-
-    // If we got clientId/pdfName, store the PDF and return JSON link
-    if let (Some(client_id), Some(pdf_name)) = (form_data.client_id, form_data.pdf_name) {
-        // Make sure the directory exists
-        let client_dir = Path::new("public").join("pdf").join(&client_id);
-        fs::create_dir_all(&client_dir)?;
-
-        // Ensure pdf_name has .pdf extension
-        let final_pdf_name = if !pdf_name.ends_with(".pdf") {
-            format!("{}.pdf", pdf_name)
-        } else {
-            pdf_name
-        };
-
-        // Copy from temp to final location
-        let out_path = client_dir.join(&final_pdf_name);
-        fs::copy(pdf_path, &out_path)?;
-
-        // Return a JSON with the link to download
-        let download_link = format!("/download/{}/{}", client_id, final_pdf_name);
-        Ok(Either::Right(Json(ConvertResponse { download_url: download_link })))
-    } else {
-        // Return the PDF file directly - fixed version
-        Ok(Either::Left(NamedFile::open(pdf_temp_path.path()).await?))
-    }
-}
-
-// ------------ Download Endpoint ------------
-
-#[get("/<client_id>/<pdf_name>")]
-async fn download_pdf(client_id: &str, pdf_name: &str) -> Option<PdfResponse> {
-    let path = Path::new("public")
-        .join("pdf")
-        .join(client_id)
-        .join(pdf_name);
-
-    NamedFile::open(path).await.ok().map(|file| {
-        // Ensure the filename has .pdf extension
-        let download_name = if !pdf_name.ends_with(".pdf") {
-            format!("{}.pdf", pdf_name)
-        } else {
-            pdf_name.to_string()
-        };
-
-        PdfResponse(
-            Response::build()
-                .header(ContentType::PDF)
-                .header(Header::new(
-                    "Content-Disposition",
-                    format!("attachment; filename=\"{}\"", download_name)
-                ))
-                .sized_body(None, file.take_file())
-                .finalize()
-        )
-    })
-}
-
-// ------------ Launch ------------
 
 #[launch]
 fn rocket() -> _ {
@@ -306,13 +30,24 @@ fn rocket() -> _ {
 
     rocket::build()
         .attach(cors)
-        // mount our PDF-generation route at "/"
-        .mount("/", routes![convert])
-        // mount our public static files if we want
+        // Legacy FormData endpoint (backward compatible)
+        .mount("/", routes![routes::legacy::convert])
+        // Static files
         .mount("/static", FileServer::from("static"))
-        // mount our explicit download route for saved PDFs
-        .mount("/download", routes![download_pdf])
+        // Download saved PDFs
+        .mount("/download", routes![routes::download::download_pdf])
+        // New JSON API endpoints
+        .mount(
+            "/api",
+            routes![
+                routes::health::health,
+                routes::convert::convert,
+                routes::render::render,
+                routes::html_to_pdf::html_to_pdf,
+                routes::preview::preview,
+                routes::merge::merge,
+                routes::watermark::watermark,
+                routes::protect::protect,
+            ],
+        )
 }
-
-
-
